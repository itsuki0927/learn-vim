# learn-vim

学习Vim编辑

## 插入模式

### 插入模式及时更正错误

- `<C-h>` 删除前一个字符(同退格键)
- `<C-w>` 删除前一个单词
- `<C-u>` 删至行首

### 返回普通模式

- `<Esc>` 切换到普通模式
- `<C-[>` 切换到普通模式
- `<C-o>` 切换到插入-普通模式

#### 插入-普通模式

执行一个普通模式命令,执行完后,立马进入插入模式

### 不离开插入模式, 粘贴寄存器的文本

- `<C-r>{register}`

### 随时随地做运算

- `<C-r>={expr}<CR>`

### 用替换模式替换已有文本

- `R`
- `r{char}`

## 可视模式

可视模式允许我们选中一个文本区域并在其上操作

- `<C-g>` 选择-可视切换

### 选择高亮选区

#### 激活可视模式

- `v` 激活面向字符的可视模式
- `V` 激活面向行的可视模式
- `<C-v>` 激活面向列块的可视模式
- `gv` 重选上次的高亮选区

#### 可视模式切换

- `<Esc>`/`<C-[>` 回到普通模式
- `o` 切换高亮选区活动端

## 命令行模式

### Ex命令

|   命令   |    用途  |
| ---- | ---- |
|   :[range]delete [x]   |    删除指定范围内的行[到寄存器x中]  |
|   :[range]yank [x]   |    复制指定范围内的行[到寄存器x中]  |
|   :[line]put [x]   |    在指定行后粘贴寄存器x中的内容|
|   :[range]copy {address}   |    在指定范围内的行拷贝到{address}所指定的行之下|
|   :[range]move {address}   |    在指定范围内的行移动到{address}所指定的行之下|
|   :[range]join   |    连接指定范围内的行|
|   :[range]normal {commands}   |    对指定范围内的每一行执行普通模式命令 {commands}|
|   :[range]substitute/{pattern}/{string}/[flags]   |把指定范围内出现{pattern}的地方替换为{string}|
|   :[range]global/{pattern}/[cmd]   |对指定范围内匹配{pattern}的所有行,在其上执行Ex命令{cmd}|

### 在一行或多个连续行上执行命令

- `:print/:p` 回显指定行的内容
- `.` 代表当前行的地址
- `%` 代表当前文件中的所有行

### Ex 命令的地址及范围的符号

| 符号 | 地址 |
| ---- | ---- |
| 1  | 文件的第一行|
| $  | 文件的最后一行|
| 0  | 虚拟行,位于文件第一行上方|
| .  | 光标所在行|
| 'm | 包含位置标记m的行|
| '< | 高亮选区的起始行|
| > | 高亮选区的结束行 |
| % | 整个文件(:1,$的简写) |

### 使用`:t`和`:m`命令复制和移动行

- `:[range]copy {address}` :copy简写为:co、:t

| 命令 | 用途 |
| ---- | ---- |
| :6t. | 把第6行复制到当前行下方 |
| :t6 | 把当前行复制到第6行下方 |
| :t. | 为当前行创建一个副本(类似于普通模式下的yyp)|
| :t$ | 把当前行复制到文本结尾 |
| :<,>t0 | 把高亮选区的行复制到开头|

** :m 等同于:t **

### 在指定范围执行普通模式命令

`:[range]normal {expr}`

### 重复上次的Ex命令

- `.` 重复上次修改
- `@:` 重复上次的Ex命令

### 补全Ex命令

- `<C-d>` 显示可用的补全列表

### 把当前单词插入到命令行

### 回溯历史命令

- `<C-p>` 反向遍历命令历史
- `<C-n>` 正向遍历命令历史
- `q:` 打开Ex命令历史的命令行窗口
- `q/` 打开查找命令历史的命令行窗口

### 执行Shell命令

- `:!{cmd}` 执行shell命令
- `:te` 新建一个terminal
- `exit` 退出terminal

## 文件

### 用缓冲区列表管理打开的文件

- `:ls` 列出所有被载入内存中的缓冲区列表
- `%` 表示哪个缓冲区在当前窗口显示, `#` 表示轮换文件
- `<C-^>` 可以在当前文件和轮换文件进行切换
- `:bprev`、`:bnext` 在列表中反向、正向移动
- `:bfirst`、`:blast`跳到列表的开头、结尾
- `:buffer N` 跳到列表中的编号为N的缓冲区
- `:bdelete` 删除缓冲区

### 管理隐藏缓冲区

- `#h + "a.txt"` h表示隐藏缓冲区(hidden)
- `#a "b.txt"` a表示活动缓冲区(active)

### 将工作区切分成窗口

#### 创建分割窗口

- `<C-w>s` 水平切分
- `<C-w>v` 垂直切分
- `:sp[lit]{file}` 水平切分,在新窗口载入{file}
- `:vsp[lit]{file}` 垂直切分,在新窗口载入{file}

#### 窗口间切换

- `<C-w>w` 在窗口间循环切换
- `<C-w>l` 切换到右边的窗口
- `<C-w>h` 切换到左边的窗口
- `<C-w>j` 切换到下边的窗口
- `<C-w>k` 切换到上边的窗口

#### 关闭窗口

- `<C-w>c`、`:clo[se]` 关闭活动窗口
- `<C-w>o`、`on[ly]` 保留活动窗口,关闭其他窗口

#### 改变窗口大小以及重新排列窗口

- `<C-w>=` 使所有窗口等宽等高
- `<C-w>_` 最大化活动窗口的高度
- `<C-w>|` 最大化活动窗口的宽度
- `[N]<C-w>_` 把活动窗口的高度设置[N]行
- `[N]<C-w>|` 把活动窗口的宽度设置[N]行

## 更快的移动

### 手指保持在本行

- `h` 左移一列
- `l` 右移一列
- `j` 下移一行
- `k` 上移一行

### 屏幕行与实际行

- `j` 向下移动一个实际行
- `gj` 向下移动一个屏幕行
- `k` 向上移动一个实际行
- `gk` 向上移动一个屏幕行
- `0` 移动到实际行的行首
- `g0` 移动到屏幕行的行首
- `$` 移动到实际行的行尾
- `g0` 移动到屏幕行的行尾
- `^` 移动到实际行的第一个非空白字符
- `g^` 移动到屏幕行的第一个非空白字符

### 基于单词的移动

单词: 由字母、数字、下划线，或其他非空白字符的序列组成
字串: 非空白字符序列组成，字串间以空白字符分隔

- `w` 正向移动到下一个单词的开头
- `b` 反向移动到当前单词/上个单词的开头
- `e` 正向移动到当前单词/下个单词的结尾
- `ge` 反向移动到上一个单词的结尾
- `W` 正向移动到下一个字串的开头
- `B` 反向移动到当前字串/上个字串的开头
- `E` 正向移动到当前字串/下个字串的结尾
- `gE` 反向移动到上一个串的结尾

### 对字符进行查找

- `f{char}` 正向移动下一个{char}所在之处
- `F{char}` 反向移动上一个{char}所在之处
- `t{char}` 正向移动下一个{char}所在之处的前一个字符上
- `T{char}` 反向移动上一个{char}所在之处的后一个字符上
- `;` 重复上次的字符查找命令
- `,` 反转方向查找上次的字符查找命令
